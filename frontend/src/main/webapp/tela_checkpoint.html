<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8" />
    <title>Consulta Checkpoints DeslocaFacil</title>
    <link rel="stylesheet" href="assets/css/normalize.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet" />

    <link rel="stylesheet" href="assets/css/tela_checkpoint.css" />
    <link rel="stylesheet" href="assets/css/dropdown_generico.css" />

    <!-- SUGESTÃO CSS: depois coloque no arquivo .css do projeto
    .dropdown-deslocamento-label {
        font-weight: 600;
        margin-bottom: 8px;
    }
    .tabela-checkpoint-header {
        background-color: #f1f5f9;
        font-weight: 600;
    }
    -->
</head>

<body>
    <div class="container mt-4 mb-5">

        <!-- CARD PRINCIPAL -->
        <section class="card">

            <!-- CABEÇALHO -->
            <div class="card-header d-flex justify-content-between align-items-center bg-primary text-white">
                <h4 class="mb-0">
                    <i class="fas fa-route me-2"></i>
                    Checkpoints do Deslocamento
                </h4>
            </div>

            <!-- CORPO -->
            <div class="card-body">

                <!-- SELEÇÃO DE DESLOCAMENTO (DROPDOWN) -->
                <div class="mb-4">
                    <label for="selectDeslocamento" class="dropdown-deslocamento-label">
                        <i class="fas fa-map-signs fa-lg"></i>
                        Selecione um deslocamento:
                    </label>

                    <select id="selectDeslocamento" class="form-select">
                        <option value="" selected disabled>Escolha um deslocamento...</option>

                        <!-- MOCK: APENAS O PRIMEIRO SERÁ USADO -->
                        <option value="4">
                            Curitiba → São Paulo - 03/12/2025 16:00
                        </option>

                        <!-- Você pode adicionar mais itens se quiser -->
                    </select>
                </div>

                <!-- LABEL COM INFORMAÇÕES DO DESLOCAMENTO + BOTÃO -->
                <div id="blocoInfoDeslocamento" class="d-none mb-3">
                    <div class="d-flex justify-content-between align-items-center">

                        <!-- LABEL (LEFT) -->
                        <h5 id="labelResumoDeslocamento" class="mb-0">
                            <!-- preenchido via JS -->
                        </h5>

                        <!-- BOTÃO NOVO CHECKPOINT (RIGHT) -->
                        <button class="btn btn-success" id="btnAdicionarCheckpoint">
                            <i class="fas fa-plus me-2"></i>Novo Checkpoint
                        </button>
                    </div>
                </div>

                <!-- TABELA DE CHECKPOINTS -->
                <div class="table-responsive">
                    <table class="table table-bordered table-striped align-middle">

                        <thead class="table-light tabela-checkpoint-header">
                            <tr>
                                <th>Deslocamento</th>
                                <th>Descrição</th>
                                <th>Ícone</th>
                                <th>Localização</th>
                                <th>Data/Hora</th>
                                <th>Observações</th>
                            </tr>
                        </thead>

                        <tbody id="tabelaCheckpointsBody">
                            <!-- Inicia somente o header
                                 Ao selecionar um deslocamento, o JS preenche
                            -->
                        </tbody>
                    </table>
                </div>

            </div> <!-- /card-body -->
            <div class="text-center mt-4 mb-2">
                <button type="button" class="btn btn-danger btn-custom" id="btnSair" name="btnSair">
                    <i class="fas fa-sign-out-alt me-2"></i>Sair
                </button>
            </div>
        </section> <!-- /card -->


    </div>

    <!-- MODAL NOVO CHECKPOINT (inalterada, preservada exatamente) -->

    <!-- Modal Adicionar/Editar Checkpoint -->
    <div class="modal fade" id="modalCheckpoint" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">

                <div class="modal-header bg-primary text-white">
                    <h5 class="modal-title" id="modalCheckpointTitulo">Novo Checkpoint</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>

                <form id="formCheckpoint">
                    <div class="modal-body">

                        <input type="hidden" id="checkpointId" />
                        <input type="hidden" id="deslocamentoId" />

                        <!-- DESCRIÇÃO -->
                        <div class="mb-3">
                            <label class="form-label">
                                <i class="fa-solid fa-pen me-1" style="color:black"></i>
                                Descrição
                            </label>
                            <input type="text" id="descricao" class="form-control" maxlength="255" required />
                        </div>

                        <div class="row">

                            <!-- LOCALIZAÇÃO -->
                            <div class="col-md-6 mb-3">
                                <label class="form-label">
                                    <i class="fa-solid fa-location-dot me-1" style="color:black"></i>
                                    Localização
                                </label>
                                <input type="text" id="localizacao" class="form-control"
                                    placeholder="Cidade, posto, km..." />
                            </div>

                            <!-- DATA/HORA REALIZADA (NOVO CAMPO) -->
                            <div class="col-md-6 mb-3">
                                <label class="form-label">
                                    <i class="fa-solid fa-clock me-1" style="color:black"></i>
                                    Data/Hora Realizada
                                </label>
                                <input type="datetime-local" id="data_realizada" class="form-control" />
                            </div>

                        </div>

                        <!-- OBSERVAÇÕES -->
                        <div class="mb-3">
                            <label class="form-label">
                                <i class="fa-solid fa-note-sticky me-1" style="color:black"></i>
                                Observações
                            </label>
                            <textarea id="observacoes" class="form-control" rows="3"></textarea>
                        </div>

                    </div>

                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                            Cancelar
                        </button>
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-save me-2"></i>Salvar Checkpoint
                        </button>
                    </div>

                </form>

            </div>
        </div>
    </div>



</body>

</html>
